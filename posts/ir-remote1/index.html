<!DOCTYPE html><html lang="ko-KR" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="음성으로 TV제어하기 - 1.신호 복제" /><meta name="author" content="Jeong Junsu" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="음성으로 TV를 제어해 보자! 여가 생활을 즐기기 위해 TV를 보려 하면 리모컨이 저 멀리 있거나, 어디 있는지 모를 때가 많다. 그럴 때마다 한번 쯤은 리모컨 없이 기계를 제어하는 상상을 해 보았을 것이다. 물론 현재 시중에는 더욱 쉽고 다양한 방법으로 제어 할 수 있도록 개발된 제품이 많이 출시되어 있지만 이를 위해 새 TV를 사거나 AI 스피커를 구매하는 것은 비효율 적이라는 생각이 들었다. 그래서 간단하게나마 직접 개발해 보기로 하였다. 가장 처음 해야 할 일은 TV에 자동으로 신호를 전송하는 부분을 설계하는 일이다. 리모컨에 직접 모터와 각종 장치들을 달아 제어하는 방법도 있지만, 이 방식은 많은 문제가 존재하므로 적외선 수신기로 리모컨의 적외선 신호를 그대로 복제하여 저장해 두었다가 신호를 보내고 싶을 때 발신기로 적외선 신호를 전송하는 방식을 사용하기로 하였다. 쉽게 말해, 리모컨을 복제해 두었다가 특정 음성이 인식되면 신호를 직접 생성해서 전송하는 장치를 만든다는 것이다. Hardware 그러기 위해서는 먼저 리모컨의 신호를 복제해 두어야 하는데, 간단히 아두이노 나노와 적외선 수신 센서를 이용해 리모컨의 적외선 신호를 복제해 보겠다. 필자가 사용한 적외선 센서는 TSOP1738이고, 이 센서의 PINOUT은 아래의 이미지와 같다. TSOP1738이 동작하기 위해서는 5V의 전압이 필요하다. 그러므로 아두이노의 5V핀과 TSOP의 Vs부분을 연결 시켜주도록 하자. 또한, 아두이노에서 TSOP의 데이터를 읽어오기 위해 OUT핀과 아두이노의 D11핀도 연결한다. (굳이 D11핀에 연결하는 이유는 아래에 나온다) 아래의 이미지처럼 회로를 구성하면 된다. Software 하드웨어의 구성이 끝났으므로 소프트웨어를 만들어 보겠다. IRremote 라이브러리에 포함된 예제인 IRrecvDumpV2를 이용하도록 하겠다. IRremote 라이브러리는 아두이노에 기본적으로 포함되어있는 라이브러리가 아니므로 먼저 IRremote 라이브러리를 추가해야 한다. 아두이노 IDE의 스케치-&gt;라이브러리 포함하기-&gt;라이브러리 관리로 들어가면 라이브러리 매니저 창이 뜰것이다. IRremote를 검색하여 설치 해 주도록 하자. 라이브러리 설치를 완료했으면 아두이노 IDE의 파일-&gt;예제-&gt;IRremote-&gt;IRrecvDumpV2를 열어준다. 아래와 같은 코드가 로딩된다면 잘 설치된 것이다. 위에서 Data핀을 아두이노의 D11핀에 연결하라고 하였다. 그 이유가 여기에 있는데, 코드의 9번째 줄을 보면 1 int recvPin = 11; 와 같이 초기화 된 것을 알 수 있다. 이는 데이터를 받을 핀을 지정해 준 것인데, 간단히 데이터를 확인만 할 것이므로 코드를 수정할 필요가 없게 하기위해 D11핀에 연결한 것이다. D11핀이 아닌 다른 핀으로 변경해 주어도 문제는 없다. 회로 구성과 코드 편집이 완료 되었다면 아두이노를 컴퓨터에 연결하여 프로그램을 컴파일/업로드 한다. 업로드가 성공적으로 완료되었다면 툴-&gt;시리얼 모니터를 실행하고 적외선 센서를 향해 리모컨 버튼을 눌러 신호를 읽어본다. 필자는 SK BTV를 사용하므로 아래와 같은 신호를 얻을 수 있었다. 기능 신호 전원 1FE807F 1FEFF00 E0E040BF 20DF10EF 1FE8F80 볼륨up E0E0E01F 20DF40BF 볼륨down E0E0D02F 20DFC03F 채널up 1FE02FD FFFFFFFF 1FEFF00 채널down 1FE827D FFFFFFFF 1FEFF00 숫자 0 1FE04FB FFFFFFFF 1FEFF00 숫자 1 1FE847B FFFFFFFF 1FEFF00 숫자 2 1FE44BB FFFFFFFF 1FEFF00 숫자 3 1FEC43B FFFFFFFF 1FEFF00 숫자 4 1FE24DB FFFFFFFF 1FEFF00 숫자 5 1FEA45B FFFFFFFF 1FEFF00 숫자 6 1FE649B FFFFFFFF 1FEFF00 숫자 7 1FEE41B FFFFFFFF 1FEFF00 숫자 8 1FE14EB FFFFFFFF 1FEFF00 숫자 9 1FE946B FFFFFFFF 1FEFF00 신호를 얻을 때 주의할 점이 있는데 대상 리모컨의 적외선이 아닌 태양 적외선, 다른 장치의 적외선 등 잡음이 섞일 수 있으니 여러번 측정하여 가장 최적화 된 값을 읽어야 한다는 점이다. 필자는 5번 정도 측정해 보았다. 또한, 실제로 읽히는 신호는 필자의 리모컨 신호와는 다를 수도 있다. TV의 종류와 리모컨의 종류에 따라 신호 형식이 달라질 수 있으므로 자신의 리모컨에 맞는 신호를 얻어야 한다. 다음 글에서는 얻은 신호를 이용해 실제로 리모컨 없이 TV를 제어하는 방법에 대해 글을 쓰도록 하겠다. 얻은 신호는 한 곳에 잘 저장해 두도록 하자." /><meta property="og:description" content="음성으로 TV를 제어해 보자! 여가 생활을 즐기기 위해 TV를 보려 하면 리모컨이 저 멀리 있거나, 어디 있는지 모를 때가 많다. 그럴 때마다 한번 쯤은 리모컨 없이 기계를 제어하는 상상을 해 보았을 것이다. 물론 현재 시중에는 더욱 쉽고 다양한 방법으로 제어 할 수 있도록 개발된 제품이 많이 출시되어 있지만 이를 위해 새 TV를 사거나 AI 스피커를 구매하는 것은 비효율 적이라는 생각이 들었다. 그래서 간단하게나마 직접 개발해 보기로 하였다. 가장 처음 해야 할 일은 TV에 자동으로 신호를 전송하는 부분을 설계하는 일이다. 리모컨에 직접 모터와 각종 장치들을 달아 제어하는 방법도 있지만, 이 방식은 많은 문제가 존재하므로 적외선 수신기로 리모컨의 적외선 신호를 그대로 복제하여 저장해 두었다가 신호를 보내고 싶을 때 발신기로 적외선 신호를 전송하는 방식을 사용하기로 하였다. 쉽게 말해, 리모컨을 복제해 두었다가 특정 음성이 인식되면 신호를 직접 생성해서 전송하는 장치를 만든다는 것이다. Hardware 그러기 위해서는 먼저 리모컨의 신호를 복제해 두어야 하는데, 간단히 아두이노 나노와 적외선 수신 센서를 이용해 리모컨의 적외선 신호를 복제해 보겠다. 필자가 사용한 적외선 센서는 TSOP1738이고, 이 센서의 PINOUT은 아래의 이미지와 같다. TSOP1738이 동작하기 위해서는 5V의 전압이 필요하다. 그러므로 아두이노의 5V핀과 TSOP의 Vs부분을 연결 시켜주도록 하자. 또한, 아두이노에서 TSOP의 데이터를 읽어오기 위해 OUT핀과 아두이노의 D11핀도 연결한다. (굳이 D11핀에 연결하는 이유는 아래에 나온다) 아래의 이미지처럼 회로를 구성하면 된다. Software 하드웨어의 구성이 끝났으므로 소프트웨어를 만들어 보겠다. IRremote 라이브러리에 포함된 예제인 IRrecvDumpV2를 이용하도록 하겠다. IRremote 라이브러리는 아두이노에 기본적으로 포함되어있는 라이브러리가 아니므로 먼저 IRremote 라이브러리를 추가해야 한다. 아두이노 IDE의 스케치-&gt;라이브러리 포함하기-&gt;라이브러리 관리로 들어가면 라이브러리 매니저 창이 뜰것이다. IRremote를 검색하여 설치 해 주도록 하자. 라이브러리 설치를 완료했으면 아두이노 IDE의 파일-&gt;예제-&gt;IRremote-&gt;IRrecvDumpV2를 열어준다. 아래와 같은 코드가 로딩된다면 잘 설치된 것이다. 위에서 Data핀을 아두이노의 D11핀에 연결하라고 하였다. 그 이유가 여기에 있는데, 코드의 9번째 줄을 보면 1 int recvPin = 11; 와 같이 초기화 된 것을 알 수 있다. 이는 데이터를 받을 핀을 지정해 준 것인데, 간단히 데이터를 확인만 할 것이므로 코드를 수정할 필요가 없게 하기위해 D11핀에 연결한 것이다. D11핀이 아닌 다른 핀으로 변경해 주어도 문제는 없다. 회로 구성과 코드 편집이 완료 되었다면 아두이노를 컴퓨터에 연결하여 프로그램을 컴파일/업로드 한다. 업로드가 성공적으로 완료되었다면 툴-&gt;시리얼 모니터를 실행하고 적외선 센서를 향해 리모컨 버튼을 눌러 신호를 읽어본다. 필자는 SK BTV를 사용하므로 아래와 같은 신호를 얻을 수 있었다. 기능 신호 전원 1FE807F 1FEFF00 E0E040BF 20DF10EF 1FE8F80 볼륨up E0E0E01F 20DF40BF 볼륨down E0E0D02F 20DFC03F 채널up 1FE02FD FFFFFFFF 1FEFF00 채널down 1FE827D FFFFFFFF 1FEFF00 숫자 0 1FE04FB FFFFFFFF 1FEFF00 숫자 1 1FE847B FFFFFFFF 1FEFF00 숫자 2 1FE44BB FFFFFFFF 1FEFF00 숫자 3 1FEC43B FFFFFFFF 1FEFF00 숫자 4 1FE24DB FFFFFFFF 1FEFF00 숫자 5 1FEA45B FFFFFFFF 1FEFF00 숫자 6 1FE649B FFFFFFFF 1FEFF00 숫자 7 1FEE41B FFFFFFFF 1FEFF00 숫자 8 1FE14EB FFFFFFFF 1FEFF00 숫자 9 1FE946B FFFFFFFF 1FEFF00 신호를 얻을 때 주의할 점이 있는데 대상 리모컨의 적외선이 아닌 태양 적외선, 다른 장치의 적외선 등 잡음이 섞일 수 있으니 여러번 측정하여 가장 최적화 된 값을 읽어야 한다는 점이다. 필자는 5번 정도 측정해 보았다. 또한, 실제로 읽히는 신호는 필자의 리모컨 신호와는 다를 수도 있다. TV의 종류와 리모컨의 종류에 따라 신호 형식이 달라질 수 있으므로 자신의 리모컨에 맞는 신호를 얻어야 한다. 다음 글에서는 얻은 신호를 이용해 실제로 리모컨 없이 TV를 제어하는 방법에 대해 글을 쓰도록 하겠다. 얻은 신호는 한 곳에 잘 저장해 두도록 하자." /><link rel="canonical" href="https://kuper1712.github.io/posts/ir-remote1/" /><meta property="og:url" content="https://kuper1712.github.io/posts/ir-remote1/" /><meta property="og:site_name" content="kuper1712의 블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-03-02T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="음성으로 TV제어하기 - 1.신호 복제" /><meta name="google-site-verification" content="kaBDTp-n-Yy9Wi8yl6yYvqNZgR-yCLhqvFR9lDGIn04" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jeong Junsu","url":"https://github.com/kuper0201/"},"dateModified":"2023-01-10T07:04:11+00:00","datePublished":"2020-03-02T00:00:00+00:00","description":"음성으로 TV를 제어해 보자! 여가 생활을 즐기기 위해 TV를 보려 하면 리모컨이 저 멀리 있거나, 어디 있는지 모를 때가 많다. 그럴 때마다 한번 쯤은 리모컨 없이 기계를 제어하는 상상을 해 보았을 것이다. 물론 현재 시중에는 더욱 쉽고 다양한 방법으로 제어 할 수 있도록 개발된 제품이 많이 출시되어 있지만 이를 위해 새 TV를 사거나 AI 스피커를 구매하는 것은 비효율 적이라는 생각이 들었다. 그래서 간단하게나마 직접 개발해 보기로 하였다. 가장 처음 해야 할 일은 TV에 자동으로 신호를 전송하는 부분을 설계하는 일이다. 리모컨에 직접 모터와 각종 장치들을 달아 제어하는 방법도 있지만, 이 방식은 많은 문제가 존재하므로 적외선 수신기로 리모컨의 적외선 신호를 그대로 복제하여 저장해 두었다가 신호를 보내고 싶을 때 발신기로 적외선 신호를 전송하는 방식을 사용하기로 하였다. 쉽게 말해, 리모컨을 복제해 두었다가 특정 음성이 인식되면 신호를 직접 생성해서 전송하는 장치를 만든다는 것이다. Hardware 그러기 위해서는 먼저 리모컨의 신호를 복제해 두어야 하는데, 간단히 아두이노 나노와 적외선 수신 센서를 이용해 리모컨의 적외선 신호를 복제해 보겠다. 필자가 사용한 적외선 센서는 TSOP1738이고, 이 센서의 PINOUT은 아래의 이미지와 같다. TSOP1738이 동작하기 위해서는 5V의 전압이 필요하다. 그러므로 아두이노의 5V핀과 TSOP의 Vs부분을 연결 시켜주도록 하자. 또한, 아두이노에서 TSOP의 데이터를 읽어오기 위해 OUT핀과 아두이노의 D11핀도 연결한다. (굳이 D11핀에 연결하는 이유는 아래에 나온다) 아래의 이미지처럼 회로를 구성하면 된다. Software 하드웨어의 구성이 끝났으므로 소프트웨어를 만들어 보겠다. IRremote 라이브러리에 포함된 예제인 IRrecvDumpV2를 이용하도록 하겠다. IRremote 라이브러리는 아두이노에 기본적으로 포함되어있는 라이브러리가 아니므로 먼저 IRremote 라이브러리를 추가해야 한다. 아두이노 IDE의 스케치-&gt;라이브러리 포함하기-&gt;라이브러리 관리로 들어가면 라이브러리 매니저 창이 뜰것이다. IRremote를 검색하여 설치 해 주도록 하자. 라이브러리 설치를 완료했으면 아두이노 IDE의 파일-&gt;예제-&gt;IRremote-&gt;IRrecvDumpV2를 열어준다. 아래와 같은 코드가 로딩된다면 잘 설치된 것이다. 위에서 Data핀을 아두이노의 D11핀에 연결하라고 하였다. 그 이유가 여기에 있는데, 코드의 9번째 줄을 보면 1 int recvPin = 11; 와 같이 초기화 된 것을 알 수 있다. 이는 데이터를 받을 핀을 지정해 준 것인데, 간단히 데이터를 확인만 할 것이므로 코드를 수정할 필요가 없게 하기위해 D11핀에 연결한 것이다. D11핀이 아닌 다른 핀으로 변경해 주어도 문제는 없다. 회로 구성과 코드 편집이 완료 되었다면 아두이노를 컴퓨터에 연결하여 프로그램을 컴파일/업로드 한다. 업로드가 성공적으로 완료되었다면 툴-&gt;시리얼 모니터를 실행하고 적외선 센서를 향해 리모컨 버튼을 눌러 신호를 읽어본다. 필자는 SK BTV를 사용하므로 아래와 같은 신호를 얻을 수 있었다. 기능 신호 전원 1FE807F 1FEFF00 E0E040BF 20DF10EF 1FE8F80 볼륨up E0E0E01F 20DF40BF 볼륨down E0E0D02F 20DFC03F 채널up 1FE02FD FFFFFFFF 1FEFF00 채널down 1FE827D FFFFFFFF 1FEFF00 숫자 0 1FE04FB FFFFFFFF 1FEFF00 숫자 1 1FE847B FFFFFFFF 1FEFF00 숫자 2 1FE44BB FFFFFFFF 1FEFF00 숫자 3 1FEC43B FFFFFFFF 1FEFF00 숫자 4 1FE24DB FFFFFFFF 1FEFF00 숫자 5 1FEA45B FFFFFFFF 1FEFF00 숫자 6 1FE649B FFFFFFFF 1FEFF00 숫자 7 1FEE41B FFFFFFFF 1FEFF00 숫자 8 1FE14EB FFFFFFFF 1FEFF00 숫자 9 1FE946B FFFFFFFF 1FEFF00 신호를 얻을 때 주의할 점이 있는데 대상 리모컨의 적외선이 아닌 태양 적외선, 다른 장치의 적외선 등 잡음이 섞일 수 있으니 여러번 측정하여 가장 최적화 된 값을 읽어야 한다는 점이다. 필자는 5번 정도 측정해 보았다. 또한, 실제로 읽히는 신호는 필자의 리모컨 신호와는 다를 수도 있다. TV의 종류와 리모컨의 종류에 따라 신호 형식이 달라질 수 있으므로 자신의 리모컨에 맞는 신호를 얻어야 한다. 다음 글에서는 얻은 신호를 이용해 실제로 리모컨 없이 TV를 제어하는 방법에 대해 글을 쓰도록 하겠다. 얻은 신호는 한 곳에 잘 저장해 두도록 하자.","headline":"음성으로 TV제어하기 - 1.신호 복제","mainEntityOfPage":{"@type":"WebPage","@id":"https://kuper1712.github.io/posts/ir-remote1/"},"url":"https://kuper1712.github.io/posts/ir-remote1/"}</script><title>음성으로 TV제어하기 - 1.신호 복제 | kuper1712의 블로그</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="kuper1712의 블로그"><meta name="application-name" content="kuper1712의 블로그"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/93369658?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">kuper1712의 블로그</a></div><div class="site-subtitle font-italic">개발 블로그입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>정보</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/kuper1712" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kuper171','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>음성으로 TV제어하기 - 1.신호 복제</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>음성으로 TV제어하기 - 1.신호 복제</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1583107200" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2020/03/02 </em> </span> <span> 업데이트 <em class="" data-ts="1673334251" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2023/01/10 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/kuper0201/">Jeong Junsu</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1385 단어"> <em>7 분</em>읽는 시간</span></div></div></div><div class="post-content"><h1 id="음성으로-tv를-제어해-보자">음성으로 TV를 제어해 보자!</h1><p>여가 생활을 즐기기 위해 TV를 보려 하면 리모컨이 저 멀리 있거나, 어디 있는지 모를 때가 많다. 그럴 때마다 한번 쯤은 리모컨 없이 기계를 제어하는 상상을 해 보았을 것이다. 물론 현재 시중에는 더욱 쉽고 다양한 방법으로 제어 할 수 있도록 개발된 제품이 많이 출시되어 있지만 이를 위해 새 TV를 사거나 AI 스피커를 구매하는 것은 비효율 적이라는 생각이 들었다. 그래서 간단하게나마 직접 개발해 보기로 하였다.</p><p>가장 처음 해야 할 일은 TV에 자동으로 신호를 전송하는 부분을 설계하는 일이다. 리모컨에 직접 모터와 각종 장치들을 달아 제어하는 방법도 있지만, 이 방식은 많은 문제가 존재하므로 적외선 수신기로 리모컨의 적외선 신호를 그대로 복제하여 저장해 두었다가 신호를 보내고 싶을 때 발신기로 적외선 신호를 전송하는 방식을 사용하기로 하였다. 쉽게 말해, 리모컨을 복제해 두었다가 특정 음성이 인식되면 신호를 직접 생성해서 전송하는 장치를 만든다는 것이다.</p><h2 id="hardware"><span class="mr-2">Hardware</span><a href="#hardware" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>그러기 위해서는 먼저 리모컨의 신호를 복제해 두어야 하는데, 간단히 아두이노 나노와 적외선 수신 센서를 이용해 리모컨의 적외선 신호를 복제해 보겠다. 필자가 사용한 적외선 센서는 TSOP1738이고, 이 센서의 PINOUT은 아래의 이미지와 같다.</p><p><a href="/assets/images/irremote1/20200302_TSOP1738_pinout.png" class="popup img-link "><img data-src="/assets/images/irremote1/20200302_TSOP1738_pinout.png" alt="TSOP1738 PinOut" class="lazyload" data-proofer-ignore></a> <br /> TSOP1738이 동작하기 위해서는 5V의 전압이 필요하다. 그러므로 아두이노의 5V핀과 TSOP의 Vs부분을 연결 시켜주도록 하자. 또한, 아두이노에서 TSOP의 데이터를 읽어오기 위해 OUT핀과 아두이노의 D11핀도 연결한다. (굳이 D11핀에 연결하는 이유는 아래에 나온다) 아래의 이미지처럼 회로를 구성하면 된다.</p><p><a href="/assets/images/irremote1/20200302_ir_nano_circuit.png" class="popup img-link "><img data-src="/assets/images/irremote1/20200302_ir_nano_circuit.png" alt="arduino_circuit" class="lazyload" data-proofer-ignore></a> <br /></p><hr /><h2 id="software"><span class="mr-2">Software</span><a href="#software" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>하드웨어의 구성이 끝났으므로 소프트웨어를 만들어 보겠다. IRremote 라이브러리에 포함된 예제인 IRrecvDumpV2를 이용하도록 하겠다. IRremote 라이브러리는 아두이노에 기본적으로 포함되어있는 라이브러리가 아니므로 먼저 IRremote 라이브러리를 추가해야 한다.</p><p>아두이노 IDE의 스케치-&gt;라이브러리 포함하기-&gt;라이브러리 관리로 들어가면 라이브러리 매니저 창이 뜰것이다. IRremote를 검색하여 설치 해 주도록 하자.</p><p><a href="/assets/images/irremote1/20200302_irremote_install.png" class="popup img-link "><img data-src="/assets/images/irremote1/20200302_irremote_install.png" alt="" class="lazyload" data-proofer-ignore></a> <br /></p><p>라이브러리 설치를 완료했으면 아두이노 IDE의 <strong>파일-&gt;예제-&gt;IRremote-&gt;IRrecvDumpV2</strong>를 열어준다. 아래와 같은 코드가 로딩된다면 잘 설치된 것이다.</p><p><a href="/assets/images/irremote1/20200302_irrecvdumpv2_code.png" class="popup img-link "><img data-src="/assets/images/irremote1/20200302_irrecvdumpv2_code.png" alt="IR Recev 코드" class="lazyload" data-proofer-ignore></a></p><p>위에서 Data핀을 아두이노의 D11핀에 연결하라고 하였다. 그 이유가 여기에 있는데, 코드의 9번째 줄을 보면</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">recvPin</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
</pre></table></code></div></div><p>와 같이 초기화 된 것을 알 수 있다. 이는 데이터를 받을 핀을 지정해 준 것인데, 간단히 데이터를 확인만 할 것이므로 코드를 수정할 필요가 없게 하기위해 D11핀에 연결한 것이다. D11핀이 아닌 다른 핀으로 변경해 주어도 문제는 없다.</p><p>회로 구성과 코드 편집이 완료 되었다면 아두이노를 컴퓨터에 연결하여 프로그램을 컴파일/업로드 한다.</p><p>업로드가 성공적으로 완료되었다면 <strong>툴-&gt;시리얼 모니터</strong>를 실행하고 적외선 센서를 향해 리모컨 버튼을 눌러 신호를 읽어본다. 필자는 SK BTV를 사용하므로 아래와 같은 신호를 얻을 수 있었다.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">기능<th style="text-align: center">신호<tbody><tr><td style="text-align: center">전원<td style="text-align: center">1FE807F 1FEFF00 E0E040BF 20DF10EF 1FE8F80<tr><td style="text-align: center">볼륨up<td style="text-align: center">E0E0E01F 20DF40BF<tr><td style="text-align: center">볼륨down<td style="text-align: center">E0E0D02F 20DFC03F<tr><td style="text-align: center">채널up<td style="text-align: center">1FE02FD FFFFFFFF 1FEFF00<tr><td style="text-align: center">채널down<td style="text-align: center">1FE827D FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 0<td style="text-align: center">1FE04FB FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 1<td style="text-align: center">1FE847B FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 2<td style="text-align: center">1FE44BB FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 3<td style="text-align: center">1FEC43B FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 4<td style="text-align: center">1FE24DB FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 5<td style="text-align: center">1FEA45B FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 6<td style="text-align: center">1FE649B FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 7<td style="text-align: center">1FEE41B FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 8<td style="text-align: center">1FE14EB FFFFFFFF 1FEFF00<tr><td style="text-align: center">숫자 9<td style="text-align: center">1FE946B FFFFFFFF 1FEFF00</table></div><p>신호를 얻을 때 주의할 점이 있는데 대상 리모컨의 적외선이 아닌 태양 적외선, 다른 장치의 적외선 등 잡음이 섞일 수 있으니 여러번 측정하여 가장 최적화 된 값을 읽어야 한다는 점이다. 필자는 5번 정도 측정해 보았다.</p><p>또한, 실제로 읽히는 신호는 필자의 리모컨 신호와는 다를 수도 있다. TV의 종류와 리모컨의 종류에 따라 신호 형식이 달라질 수 있으므로 자신의 리모컨에 맞는 신호를 얻어야 한다.</p><p>다음 글에서는 얻은 신호를 이용해 실제로 리모컨 없이 TV를 제어하는 방법에 대해 글을 쓰도록 하겠다. 얻은 신호는 한 곳에 잘 저장해 두도록 하자.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EA%B0%9C%EC%9D%B8%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/'>개인프로젝트</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/projects/" class="post-tag no-text-decoration" >Projects</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=음성으로 TV제어하기 - 1.신호 복제 - kuper1712의 블로그&url=https%3A%2F%2Fkuper1712.github.io%2Fposts%2Fir-remote1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=음성으로 TV제어하기 - 1.신호 복제 - kuper1712의 블로그&u=https%3A%2F%2Fkuper1712.github.io%2Fposts%2Fir-remote1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fkuper1712.github.io%2Fposts%2Fir-remote1%2F&text=음성으로 TV제어하기 - 1.신호 복제 - kuper1712의 블로그" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/boj-3495/">BOJ 3495 아스키 도형</a><li><a href="/posts/boj-10814/">BOJ 10814 나이순 정렬</a><li><a href="/posts/boj-1181/">BOJ 1181 단어 정렬</a><li><a href="/posts/boj-18870/">BOJ 18870 좌표 압축</a><li><a href="/posts/ir-remote3/">음성으로 TV제어하기 - 3.음성 인식</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/projects/">Projects</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">바로가기</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ir-remote2/"><div class="card-body"> <em class="small" data-ts="1583193600" data-df="YYYY/MM/DD" > 2020/03/03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>음성으로 TV제어하기 - 2.TV 제어</h3><div class="text-muted small"><p> 음성으로 TV를 제어해 보자! 이 전 글에서는 리모컨의 적외선 신호를 복제하는 방법에 대하여 다뤘다. 이번 글에서는 복제한 신호를 이용해 실제로 TV를 제어 할 수 있는 장치를 만들어 보도록 하겠다. 아두이노를 이용해 외부와의 연결 없이 테스트를 할 수도 있지만, 다른 장치에서 인식된 음성으로 제어하기 위해 외부와의 연결이 필요하다. 물론 음성인식...</p></div></div></a></div><div class="card"> <a href="/posts/ir-remote3/"><div class="card-body"> <em class="small" data-ts="1583280000" data-df="YYYY/MM/DD" > 2020/03/04 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>음성으로 TV제어하기 - 3.음성 인식</h3><div class="text-muted small"><p> 음성으로 TV를 제어해 보자! 지금까지는 음성인식 후의 신호를 만들어주는 부분을 구현했다. 이번에는 실제로 음성인식을 수행하는 부분을 만들어 볼 것이다. 필자는 이 프로젝트를 진행하며 직접 음성인식 모델을 구축할지, 기존에 제작되어 있는 API를 가져다 쓸 지에 대하여 고민을 많이 했다. 음성인식 모델을 직접 구현해보니 음성데이터와 컴퓨팅 파워가 ...</p></div></div></a></div><div class="card"> <a href="/posts/boj-3495/"><div class="card-body"> <em class="small" data-ts="1646265600" data-df="YYYY/MM/DD" > 2022/03/03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>BOJ 3495 아스키 도형</h3><div class="text-muted small"><p> BOJ 문제 풀이 문제 (link) 창영이는 메모장에 ., \, /을 이용해서 도형을 그렸다. 각 문자는 그림에서 1*1크기의 단위 정사각형을 나타낸다. .은 빈 칸을 나타내며, /는 정사각형의 왼쪽 아래 꼭짓점과 오른쪽 위 꼭짓점이 연결된 선분을, \은 왼쪽 위 꼭짓점과 오른쪽 아래 꼭짓점이 연결된 선분을 나타낸다. 창영이가 그린 도형의 넓이를 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"><div class="btn btn-outline-primary disabled" prompt="이전 글"><p>-</p></div><a href="/posts/ir-remote2/" class="btn btn-outline-primary" prompt="다음 글"><p>음성으로 TV제어하기 - 2.TV 제어</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/projects/">Projects</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/kuper1712">kuper1712</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
