<!DOCTYPE html><html lang="ko-KR" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="음성으로 TV제어하기 - 3.음성 인식" /><meta name="author" content="Jeong Junsu" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="음성으로 TV를 제어해 보자!" /><meta property="og:description" content="음성으로 TV를 제어해 보자!" /><link rel="canonical" href="https://kuper1712.github.io/posts/ir-remote3/" /><meta property="og:url" content="https://kuper1712.github.io/posts/ir-remote3/" /><meta property="og:site_name" content="kuper1712의 블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-03-04T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="음성으로 TV제어하기 - 3.음성 인식" /><meta name="google-site-verification" content="kaBDTp-n-Yy9Wi8yl6yYvqNZgR-yCLhqvFR9lDGIn04" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jeong Junsu","url":"https://github.com/kuper0201/"},"dateModified":"2023-01-10T07:04:51+00:00","datePublished":"2020-03-04T00:00:00+00:00","description":"음성으로 TV를 제어해 보자!","headline":"음성으로 TV제어하기 - 3.음성 인식","mainEntityOfPage":{"@type":"WebPage","@id":"https://kuper1712.github.io/posts/ir-remote3/"},"url":"https://kuper1712.github.io/posts/ir-remote3/"}</script><title>음성으로 TV제어하기 - 3.음성 인식 | kuper1712의 블로그</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="kuper1712의 블로그"><meta name="application-name" content="kuper1712의 블로그"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/93369658?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">kuper1712의 블로그</a></div><div class="site-subtitle font-italic">개발 블로그입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>정보</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/kuper1712" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kuper171','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>음성으로 TV제어하기 - 3.음성 인식</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..."> </span> <span id="search-cancel" >취소</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>음성으로 TV제어하기 - 3.음성 인식</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1583280000" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2020/03/04 </em> </span> <span> 업데이트 <em class="" data-ts="1673334291" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2023/01/10 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/kuper0201/">Jeong Junsu</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1384 단어"> <em>7 분</em>읽는 시간</span></div></div></div><div class="post-content"><h1 id="음성으로-tv를-제어해-보자">음성으로 TV를 제어해 보자!</h1><p>지금까지는 음성인식 후의 신호를 만들어주는 부분을 구현했다. 이번에는 실제로 음성인식을 수행하는 부분을 만들어 볼 것이다.</p><p>필자는 이 프로젝트를 진행하며 직접 음성인식 모델을 구축할지, 기존에 제작되어 있는 API를 가져다 쓸 지에 대하여 고민을 많이 했다. 음성인식 모델을 직접 구현해보니 음성데이터와 컴퓨팅 파워가 부족해서 인식률과 학습 속도가 떨어지는 문제가 있었고, API를 이용하면 요청 건당 가격을 지불해야 하는 등의 문제가 있었다. 이런 문제들 때문에 다양한 API와 모델 학습 방법을 구글링해 본 결과 안드로이드OS의 내장 음성 인식 기능을 이용하는것이 가장 효율적이라는 결론에 이르렀다.</p><p>하지만 안드로이드OS의 내장 음성인식 기능을 사용하기 위해서도 문제가 존재했는데, 당연하게도 안드로이드OS가 필요하다는 것이다. 처음에는 라즈베리 파이를 이용해서 음성인식을 구현하려고 계획 했지만 안드로이드OS때문에 라즈베리 파이 이용은 포기했다. 물론, 라즈베리 파이에도 안드로이드를 올릴 수 있겠지만, 창고를 조금만 찾아보면 이전에 사용하던 성능 짱짱한 안드로이드 폰들이 숨어있는데 굳이 라즈베리 파이에 안드로이드를 설치할 필요성을 느끼지 못했다. 심지어 안드로이드 폰에는 마이크까지 기본으로 붙어있다!</p><p>필자는 창고에 숨어있던 갤럭시 노트4를 음성 인식기로 사용하기로 했다. 기기는 정해졌으므로 이전에 만들었던 H/W와 안드로이드의 음성인식 기능을 연동하기만 하면 음성으로 TV를 제어할 수 있게 된다.</p><p>안드로이드에서 음성을 인식하고 UDP 패킷을 전송하기 위해 어플리케이션을 제작했다. 첨부된 앱을 다운받아 음성 인식기로 사용할 안드로이드 폰에 설치하고 실행하면 된다. 앱이 동작하는 방식은 간단하다. 안드로이드의 음성 인식 기능이 문자열로 인식된 결과를 반환해 주면 반환된 문자열을 비교해 각각 기능의 UDP 패킷을 생성하여 이전에 만들어 두었던 H/W에 전송한다.</p><p><a href="/assets/files/irremote3/VoiceController.apk">안드로이드 앱(apk)</a> / <a href="https://github.com/kuper0201/TV_VoiceController_AndroidApp">소스 코드</a></p><p>어플리케이션을 설치하고 실행 해 보면 마이크 권한을 요구할텐데 음성을 인식 하기 위해서 마이크가 필요하므로 권한을 허용해 줘야 한다. 권한까지 허용해 주었다면 아래와 같이 메인 화면이 표시 된다.</p><p><a href="/assets/images/irremote3/20200320_voiceController_main.png" class="popup img-link "><img data-src="/assets/images/irremote3/20200320_voiceController_main.png" alt="앱 실행" class="lazyload" data-proofer-ignore></a></p><p>“Enter your IP!!!” 부분에 이전에 만들었던 ESP-01 회로의 IP주소를 입력하고 “SET!!!”버튼을 클릭하면 UDP 패킷을 전송할 IP가 설정된다. 이렇게 음성인식까지 연동을 시켰다. 마이크에 대고 “TV 꺼 줘”라고 말하면 TV가 꺼지고 “TV 켜 줘”라고 말하면 TV가 켜지는 것을 볼 수 있을 것이다. 물론 TV를 끄고 켜고 하는 기능 외에도 여러 다른 기능들도 사용할 수 있다.</p><p>사용할 수 있는 기능을 표로 정리해 두었다.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: center">명령<th style="text-align: center">동작<tbody><tr><td style="text-align: center">TV 켜 줘/꺼 줘<td style="text-align: center">TV 전원 On/Off<tr><td style="text-align: center">볼륨 업/음량 키워<td style="text-align: center">음량 올림<tr><td style="text-align: center">볼륨 다운/음량 내려<td style="text-align: center">음량 내림<tr><td style="text-align: center">채널 업/채널 올려<td style="text-align: center">채널 올림<tr><td style="text-align: center">채널 다운/채널 내려<td style="text-align: center">채널 내림<tr><td style="text-align: center">(숫자) 채널<td style="text-align: center">(숫자)번 채널로 이동</table></div><p>이 기능들 말고도 “조용히” 기능이나 리모컨의 기타 다른 기능들을 추가하고 싶거나 애플리케이션의 난잡한 소스를 깔끔하게 정리해서 사용하고 싶다면 마음껏 수정해서 사용해도 좋다. 참고로 이 프로젝트는 적외선 리모컨이 대상이었으므로 TV외에도 에어컨, 공기청정기 등 적외선 리모컨을 이용하는 기기라면 어디에든 사용할 수 있다!</p><p>마지막으로 필자의 어플리케이션은 안드로이드의 내장 음성인식 기능을 사용한다고 하였는데 이는 심각한 문제가 있다. 음성 인식을 시작하고 종료할 때마다 계속 알림음이 난다는 것이다. 이 부분은 아예 소리를 끄고 사용하거나 서드파티 안드로이드 음성 인식 엔진을 (Ex. Sphinx CMU) 사용하면 해결될 것 같다. 일단 동작은 잘 되므로 소리를 아예 꺼놓고 사용해 보다가 나중에 추가적으로 불편한 점이 생기거나 못 쓸정도라고 생각되면 코드 정리와 개선을 조금 해야겠다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EA%B0%9C%EC%9D%B8%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/'>개인프로젝트</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/projects/" class="post-tag no-text-decoration" >Projects</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=음성으로 TV제어하기 - 3.음성 인식 - kuper1712의 블로그&url=https%3A%2F%2Fkuper1712.github.io%2Fposts%2Fir-remote3%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=음성으로 TV제어하기 - 3.음성 인식 - kuper1712의 블로그&u=https%3A%2F%2Fkuper1712.github.io%2Fposts%2Fir-remote3%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fkuper1712.github.io%2Fposts%2Fir-remote3%2F&text=음성으로 TV제어하기 - 3.음성 인식 - kuper1712의 블로그" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/boj-3495/">BOJ 3495 아스키 도형</a><li><a href="/posts/boj-10814/">BOJ 10814 나이순 정렬</a><li><a href="/posts/boj-1181/">BOJ 1181 단어 정렬</a><li><a href="/posts/boj-18870/">BOJ 18870 좌표 압축</a><li><a href="/posts/ir-remote3/">음성으로 TV제어하기 - 3.음성 인식</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/projects/">Projects</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>관련된 글</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ir-remote1/"><div class="card-body"> <em class="small" data-ts="1583107200" data-df="YYYY/MM/DD" > 2020/03/02 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>음성으로 TV제어하기 - 1.신호 복제</h3><div class="text-muted small"><p> 음성으로 TV를 제어해 보자! 여가 생활을 즐기기 위해 TV를 보려 하면 리모컨이 저 멀리 있거나, 어디 있는지 모를 때가 많다. 그럴 때마다 한번 쯤은 리모컨 없이 기계를 제어하는 상상을 해 보았을 것이다. 물론 현재 시중에는 더욱 쉽고 다양한 방법으로 제어 할 수 있도록 개발된 제품이 많이 출시되어 있지만 이를 위해 새 TV를 사거나 AI 스피커...</p></div></div></a></div><div class="card"> <a href="/posts/ir-remote2/"><div class="card-body"> <em class="small" data-ts="1583193600" data-df="YYYY/MM/DD" > 2020/03/03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>음성으로 TV제어하기 - 2.TV 제어</h3><div class="text-muted small"><p> 음성으로 TV를 제어해 보자! 이 전 글에서는 리모컨의 적외선 신호를 복제하는 방법에 대하여 다뤘다. 이번 글에서는 복제한 신호를 이용해 실제로 TV를 제어 할 수 있는 장치를 만들어 보도록 하겠다. 아두이노를 이용해 외부와의 연결 없이 테스트를 할 수도 있지만, 다른 장치에서 인식된 음성으로 제어하기 위해 외부와의 연결이 필요하다. 물론 음성인식...</p></div></div></a></div><div class="card"> <a href="/posts/boj-3495/"><div class="card-body"> <em class="small" data-ts="1646265600" data-df="YYYY/MM/DD" > 2022/03/03 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>BOJ 3495 아스키 도형</h3><div class="text-muted small"><p> BOJ 문제 풀이 문제 (link) 창영이는 메모장에 ., \, /을 이용해서 도형을 그렸다. 각 문자는 그림에서 1*1크기의 단위 정사각형을 나타낸다. .은 빈 칸을 나타내며, /는 정사각형의 왼쪽 아래 꼭짓점과 오른쪽 위 꼭짓점이 연결된 선분을, \은 왼쪽 위 꼭짓점과 오른쪽 아래 꼭짓점이 연결된 선분을 나타낸다. 창영이가 그린 도형의 넓이를 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ir-remote2/" class="btn btn-outline-primary" prompt="이전 글"><p>음성으로 TV제어하기 - 2.TV 제어</p></a> <a href="/posts/boj-18870/" class="btn btn-outline-primary" prompt="다음 글"><p>BOJ 18870 좌표 압축</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/projects/">Projects</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/kuper1712">kuper1712</a>. <span data-toggle="tooltip" data-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다.">일부 권리 보유</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">검색 결과가 없습니다.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
